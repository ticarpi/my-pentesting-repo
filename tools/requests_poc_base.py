#! /usr/bin/python

############################################################
# A PoC base script for Python Requests by @ticarpi        #
# Cut and paste, pick and choose, just reference really    #
# For when you need to automate interactions with a server #
############################################################

import requests
from requests.packages.urllib3.exceptions import InsecureRequestWarning
import re

# Clean up noisy https warnings
requests.packages.urllib3.disable_warnings(InsecureRequestWarning)
# Create session
s = requests.session()
testurl = 'http://localhost:9898/test.html'



# Make a GET request
#r = s.get(testurl, verify=False)
#print(r.text)
#print(r.status_code)



# Make a POST request
cookies = {'admin':'1','user':'ticarpi'}
r = s.post(testurl, verify=False, data=cookies)
#print(r.text)
#print(r.status_code)



# Regex check in response body
searchval = '\<p.*\<\/p\>'
resulty = re.findall(searchval, r.text)
# Show all regex results
ctr = 0
for result in resulty:
	print(resulty)[ctr]
	ctr += 1
